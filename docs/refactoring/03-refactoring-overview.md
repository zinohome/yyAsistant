# é‡æ„æ€»ä½“æ–¹æ¡ˆ

## ğŸ¯ é‡æ„ç›®æ ‡

### æ ¸å¿ƒç›®æ ‡
1. **æå‡ç³»ç»Ÿå¯é æ€§** - è§£å†³çŠ¶æ€ç®¡ç†æ··ä¹±ã€WebSocketä¸ç¨³å®šç­‰æ ¸å¿ƒé—®é¢˜
2. **ç®€åŒ–ç³»ç»Ÿæ¶æ„** - ç»Ÿä¸€çŠ¶æ€ç®¡ç†ã€äº‹ä»¶é©±åŠ¨ã€é…ç½®ç®¡ç†
3. **ä¿æŒç”¨æˆ·ç•Œé¢** - ä¸æ”¹å˜ç”¨æˆ·ç•Œé¢ï¼Œåªä¼˜åŒ–åç«¯é€»è¾‘
4. **å¢å¼ºç³»ç»Ÿæ€§èƒ½** - ä¼˜åŒ–èµ„æºç®¡ç†ã€å‡å°‘å†…å­˜æ³„æ¼ã€æå‡å“åº”é€Ÿåº¦

### æŠ€æœ¯ç›®æ ‡
- **çŠ¶æ€ç®¡ç†ç»Ÿä¸€**ï¼šä»6ä¸ªæ¨¡ç³ŠçŠ¶æ€ç®€åŒ–ä¸º8ä¸ªæ¸…æ™°çŠ¶æ€
- **äº‹ä»¶é©±åŠ¨æ¶æ„**ï¼šæŒ‰åœºæ™¯åˆ†ç»„ï¼Œå‡å°‘äº‹ä»¶å†²çª
- **æ™ºèƒ½è¶…æ—¶æœºåˆ¶**ï¼šåŠ¨æ€è¶…æ—¶ï¼Œé¿å…é•¿æ–‡æœ¬å¤„ç†é—®é¢˜
- **é…ç½®ç®¡ç†ç»Ÿä¸€**ï¼šPython config.py + JavaScript å•æ–‡ä»¶é…ç½®
- **é”™è¯¯å¤„ç†ç»Ÿä¸€**ï¼šç»Ÿä¸€é”™è¯¯å¤„ç†ã€è‡ªåŠ¨æ¢å¤ã€ç”¨æˆ·å‹å¥½æç¤º

## ğŸ—ï¸ é‡æ„ç­–ç•¥

### ç­–ç•¥é€‰æ‹©ï¼šå®Œå…¨é‡å†™ vs å¢é‡ä¼˜åŒ–

#### å®Œå…¨é‡å†™æ–¹æ¡ˆï¼ˆæ¨èï¼‰
**ä¼˜åŠ¿**ï¼š
- å½»åº•è§£å†³æ¶æ„é—®é¢˜
- ä»£ç ç»“æ„æ¸…æ™°
- æŠ€æœ¯å€ºåŠ¡æ¸…é›¶
- é•¿æœŸç»´æŠ¤æˆæœ¬ä½

**åŠ£åŠ¿**ï¼š
- å¼€å‘å‘¨æœŸè¾ƒé•¿
- é£é™©ç›¸å¯¹è¾ƒé«˜
- éœ€è¦å……åˆ†æµ‹è¯•

#### å¢é‡ä¼˜åŒ–æ–¹æ¡ˆ
**ä¼˜åŠ¿**ï¼š
- é£é™©è¾ƒä½
- å¯ä»¥é€æ­¥æ”¹è¿›
- ä¸å½±å“ç°æœ‰åŠŸèƒ½

**åŠ£åŠ¿**ï¼š
- æ— æ³•å½»åº•è§£å†³é—®é¢˜
- æŠ€æœ¯å€ºåŠ¡ç´¯ç§¯
- é•¿æœŸç»´æŠ¤æˆæœ¬é«˜

### æ¨èç­–ç•¥ï¼šå®Œå…¨é‡å†™
åŸºäºå½“å‰ç³»ç»Ÿçš„æ ¸å¿ƒé—®é¢˜ï¼Œæ¨èé‡‡ç”¨å®Œå…¨é‡å†™æ–¹æ¡ˆï¼ŒåŸå› ï¼š
1. çŠ¶æ€ç®¡ç†é—®é¢˜éœ€è¦æ ¹æœ¬æ€§é‡æ„
2. WebSocketè¿æ¥é—®é¢˜éœ€è¦æ¶æ„çº§ä¼˜åŒ–
3. äº‹ä»¶å¤„ç†å†²çªéœ€è¦ç»Ÿä¸€è®¾è®¡
4. é…ç½®ç®¡ç†éœ€è¦ç»Ÿä¸€è§„åˆ’

## ğŸ“‹ é‡æ„èŒƒå›´

### æ ¸å¿ƒé‡æ„æ¨¡å—

#### 1. çŠ¶æ€ç®¡ç†ç³»ç»Ÿ
- **ç›®æ ‡**ï¼šç»Ÿä¸€çŠ¶æ€ç®¡ç†ï¼Œè§£å†³çŠ¶æ€å†²çª
- **èŒƒå›´**ï¼šæ‰€æœ‰çŠ¶æ€ç›¸å…³ä»£ç 
- **å½±å“**ï¼šå…¨å±€åŠŸèƒ½

#### 2. WebSocketè¿æ¥ç®¡ç†
- **ç›®æ ‡**ï¼šç¨³å®šè¿æ¥ï¼Œè‡ªåŠ¨é‡è¿
- **èŒƒå›´**ï¼šWebSocketç›¸å…³ä»£ç 
- **å½±å“**ï¼šè¯­éŸ³åŠŸèƒ½

#### 3. äº‹ä»¶å¤„ç†ç³»ç»Ÿ
- **ç›®æ ‡**ï¼šç»Ÿä¸€äº‹ä»¶å¤„ç†ï¼Œé¿å…å†²çª
- **èŒƒå›´**ï¼šæ‰€æœ‰äº‹ä»¶å¤„ç†ä»£ç 
- **å½±å“**ï¼šç”¨æˆ·äº¤äº’

#### 4. é…ç½®ç®¡ç†ç³»ç»Ÿ
- **ç›®æ ‡**ï¼šç»Ÿä¸€é…ç½®ç®¡ç†
- **èŒƒå›´**ï¼šæ‰€æœ‰é…ç½®æ–‡ä»¶
- **å½±å“**ï¼šéƒ¨ç½²å’Œç»´æŠ¤

#### 5. é”™è¯¯å¤„ç†ç³»ç»Ÿ
- **ç›®æ ‡**ï¼šç»Ÿä¸€é”™è¯¯å¤„ç†
- **èŒƒå›´**ï¼šæ‰€æœ‰é”™è¯¯å¤„ç†ä»£ç 
- **å½±å“**ï¼šç”¨æˆ·ä½“éªŒ

### ä¿æŒä¸å˜çš„æ¨¡å—

#### 1. ç”¨æˆ·ç•Œé¢
- **ä¿æŒ**ï¼šæ‰€æœ‰UIç»„ä»¶å’Œå¸ƒå±€
- **åŸå› **ï¼šç”¨æˆ·è¦æ±‚ä¸æ”¹å˜ç•Œé¢
- **èŒƒå›´**ï¼šchat.pyã€components/ã€views/

#### 2. æ ¸å¿ƒåŠŸèƒ½
- **ä¿æŒ**ï¼šåŸºæœ¬åŠŸèƒ½é€»è¾‘
- **åŸå› **ï¼šåŠŸèƒ½éœ€æ±‚ä¸å˜
- **èŒƒå›´**ï¼šä¸šåŠ¡é€»è¾‘ã€æ•°æ®å¤„ç†

#### 3. æ•°æ®åº“ç»“æ„
- **ä¿æŒ**ï¼šç°æœ‰æ•°æ®åº“ç»“æ„
- **åŸå› **ï¼šæ•°æ®å…¼å®¹æ€§
- **èŒƒå›´**ï¼šmodels/ã€æ•°æ®åº“è¡¨ç»“æ„

## ğŸ”„ é‡æ„æ¶æ„è®¾è®¡

### æ–°æ¶æ„æ¦‚è§ˆ

```
yyAsistant (é‡æ„å)
â”œâ”€â”€ core/                    # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ state_manager.py    # ç»Ÿä¸€çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ event_manager.py    # äº‹ä»¶ç®¡ç†å™¨
â”‚   â”œâ”€â”€ config_manager.py   # é…ç½®ç®¡ç†å™¨
â”‚   â”œâ”€â”€ error_handler.py    # é”™è¯¯å¤„ç†å™¨
â”‚   â””â”€â”€ websocket_manager.py # WebSocketç®¡ç†å™¨
â”œâ”€â”€ components/             # UIç»„ä»¶ï¼ˆä¿æŒä¸å˜ï¼‰
â”œâ”€â”€ callbacks/              # å›è°ƒå‡½æ•°ï¼ˆé‡æ„ï¼‰
â”œâ”€â”€ views/                  # é¡µé¢è§†å›¾ï¼ˆä¿æŒä¸å˜ï¼‰
â”œâ”€â”€ assets/js/             # JavaScriptèµ„æºï¼ˆé‡æ„ï¼‰
â”œâ”€â”€ config/                # ç»Ÿä¸€é…ç½®
â”‚   â”œâ”€â”€ config.py          # Pythoné…ç½®
â”‚   â””â”€â”€ config.js          # JavaScripté…ç½®
â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°ï¼ˆé‡æ„ï¼‰
```

### æ ¸å¿ƒæ¨¡å—è®¾è®¡

#### 1. çŠ¶æ€ç®¡ç†å™¨ (StateManager)
```python
class StateManager:
    """ç»Ÿä¸€çŠ¶æ€ç®¡ç†å™¨"""
    
    def __init__(self):
        self.states = {
            'IDLE': 'idle',
            'TEXT_SSE': 'text_sse',
            'TEXT_TTS': 'text_tts',
            'VOICE_STT': 'voice_stt',
            'VOICE_SSE': 'voice_sse',
            'VOICE_TTS': 'voice_tts',
            'VOICE_CALL': 'voice_call',
            'ERROR': 'error'
        }
        self.current_state = 'IDLE'
        self.state_history = []
    
    def set_state(self, new_state):
        """è®¾ç½®çŠ¶æ€"""
        pass
    
    def get_state(self):
        """è·å–å½“å‰çŠ¶æ€"""
        pass
    
    def can_transition(self, from_state, to_state):
        """æ£€æŸ¥çŠ¶æ€è½¬æ¢æ˜¯å¦åˆæ³•"""
        pass
```

#### 2. äº‹ä»¶ç®¡ç†å™¨ (EventManager)
```python
class EventManager:
    """äº‹ä»¶ç®¡ç†å™¨"""
    
    def __init__(self):
        self.event_handlers = {}
        self.event_queue = []
    
    def register_handler(self, event_type, handler):
        """æ³¨å†Œäº‹ä»¶å¤„ç†å™¨"""
        pass
    
    def emit_event(self, event_type, data):
        """è§¦å‘äº‹ä»¶"""
        pass
    
    def process_events(self):
        """å¤„ç†äº‹ä»¶é˜Ÿåˆ—"""
        pass
```

#### 3. é…ç½®ç®¡ç†å™¨ (ConfigManager)
```python
class ConfigManager:
    """é…ç½®ç®¡ç†å™¨"""
    
    def __init__(self):
        self.config = {}
        self.load_config()
    
    def load_config(self):
        """åŠ è½½é…ç½®"""
        pass
    
    def get_config(self, key, default=None):
        """è·å–é…ç½®"""
        pass
    
    def set_config(self, key, value):
        """è®¾ç½®é…ç½®"""
        pass
```

#### 4. é”™è¯¯å¤„ç†å™¨ (ErrorHandler)
```python
class ErrorHandler:
    """é”™è¯¯å¤„ç†å™¨"""
    
    def __init__(self):
        self.error_handlers = {}
        self.error_history = []
    
    def handle_error(self, error_type, error_data):
        """å¤„ç†é”™è¯¯"""
        pass
    
    def register_handler(self, error_type, handler):
        """æ³¨å†Œé”™è¯¯å¤„ç†å™¨"""
        pass
```

#### 5. WebSocketç®¡ç†å™¨ (WebSocketManager)
```python
class WebSocketManager:
    """WebSocketç®¡ç†å™¨"""
    
    def __init__(self):
        self.connection = None
        self.reconnect_attempts = 0
        self.max_reconnect_attempts = 5
    
    def connect(self):
        """å»ºç«‹è¿æ¥"""
        pass
    
    def disconnect(self):
        """æ–­å¼€è¿æ¥"""
        pass
    
    def send_message(self, message):
        """å‘é€æ¶ˆæ¯"""
        pass
    
    def handle_reconnect(self):
        """å¤„ç†é‡è¿"""
        pass
```

## ğŸ¨ çŠ¶æ€ç®¡ç†é‡æ„

### æ–°çŠ¶æ€å®šä¹‰

#### 8ä¸ªæ¸…æ™°çŠ¶æ€
```python
STATES = {
    'IDLE': 'idle',                    # ç©ºé—²çŠ¶æ€
    'TEXT_SSE': 'text_sse',           # æ–‡æœ¬SSEå¤„ç†ä¸­
    'TEXT_TTS': 'text_tts',           # æ–‡æœ¬TTSå¤„ç†ä¸­
    'VOICE_STT': 'voice_stt',         # è¯­éŸ³STTå¤„ç†ä¸­
    'VOICE_SSE': 'voice_sse',         # è¯­éŸ³SSEå¤„ç†ä¸­
    'VOICE_TTS': 'voice_tts',         # è¯­éŸ³TTSå¤„ç†ä¸­
    'VOICE_CALL': 'voice_call',       # è¯­éŸ³é€šè¯ä¸­
    'ERROR': 'error'                  # é”™è¯¯çŠ¶æ€
}
```

#### çŠ¶æ€è½¬æ¢è§„åˆ™
```python
STATE_TRANSITIONS = {
    'IDLE': ['TEXT_SSE', 'VOICE_STT', 'VOICE_CALL'],
    'TEXT_SSE': ['TEXT_TTS', 'IDLE', 'ERROR'],
    'TEXT_TTS': ['IDLE', 'ERROR'],
    'VOICE_STT': ['VOICE_SSE', 'IDLE', 'ERROR'],
    'VOICE_SSE': ['VOICE_TTS', 'IDLE', 'ERROR'],
    'VOICE_TTS': ['IDLE', 'ERROR'],
    'VOICE_CALL': ['IDLE', 'ERROR'],
    'ERROR': ['IDLE']
}
```

### äº‹ä»¶é©±åŠ¨æ¶æ„

#### äº‹ä»¶åˆ†ç»„
```python
EVENTS = {
    'TEXT_START': 'text_start',           # æ–‡æœ¬å¤„ç†å¼€å§‹
    'TEXT_SSE_COMPLETE': 'text_sse_complete',  # æ–‡æœ¬SSEå®Œæˆ
    'TEXT_TTS_COMPLETE': 'text_tts_complete',  # æ–‡æœ¬TTSå®Œæˆ
    'VOICE_RECORD_START': 'voice_record_start', # è¯­éŸ³å½•éŸ³å¼€å§‹
    'VOICE_STT_COMPLETE': 'voice_stt_complete', # è¯­éŸ³STTå®Œæˆ
    'VOICE_SSE_COMPLETE': 'voice_sse_complete', # è¯­éŸ³SSEå®Œæˆ
    'VOICE_TTS_COMPLETE': 'voice_tts_complete', # è¯­éŸ³TTSå®Œæˆ
    'VOICE_CALL_START': 'voice_call_start',     # è¯­éŸ³é€šè¯å¼€å§‹
    'VOICE_CALL_END': 'voice_call_end',         # è¯­éŸ³é€šè¯ç»“æŸ
    'ERROR_OCCURRED': 'error_occurred',         # é”™è¯¯å‘ç”Ÿ
    'RESET_STATE': 'reset_state'                # é‡ç½®çŠ¶æ€
}
```

#### äº‹ä»¶å¤„ç†å™¨
```python
class EventProcessor:
    """äº‹ä»¶å¤„ç†å™¨"""
    
    def __init__(self):
        self.handlers = {}
        self.register_handlers()
    
    def register_handlers(self):
        """æ³¨å†Œäº‹ä»¶å¤„ç†å™¨"""
        self.handlers['TEXT_START'] = self.handle_text_start
        self.handlers['VOICE_RECORD_START'] = self.handle_voice_record_start
        # ... å…¶ä»–å¤„ç†å™¨
    
    def handle_text_start(self, event_data):
        """å¤„ç†æ–‡æœ¬å¼€å§‹äº‹ä»¶"""
        pass
    
    def handle_voice_record_start(self, event_data):
        """å¤„ç†è¯­éŸ³å½•éŸ³å¼€å§‹äº‹ä»¶"""
        pass
```

## â±ï¸ æ™ºèƒ½è¶…æ—¶æœºåˆ¶

### åŠ¨æ€è¶…æ—¶ç­–ç•¥

#### è¶…æ—¶é…ç½®
```python
TIMEOUT_CONFIG = {
    'SSE_TIMEOUT': {
        'base': 30,           # åŸºç¡€è¶…æ—¶30ç§’
        'per_char': 0.1,      # æ¯å­—ç¬¦0.1ç§’
        'max': 300,           # æœ€å¤§è¶…æ—¶5åˆ†é’Ÿ
        'warning': 60         # è­¦å‘Šè¶…æ—¶1åˆ†é’Ÿ
    },
    'TTS_TIMEOUT': {
        'base': 60,           # åŸºç¡€è¶…æ—¶60ç§’
        'per_char': 0.2,      # æ¯å­—ç¬¦0.2ç§’
        'max': 600,           # æœ€å¤§è¶…æ—¶10åˆ†é’Ÿ
        'warning': 120        # è­¦å‘Šè¶…æ—¶2åˆ†é’Ÿ
    },
    'STT_TIMEOUT': {
        'base': 30,           # åŸºç¡€è¶…æ—¶30ç§’
        'per_char': 0.05,     # æ¯å­—ç¬¦0.05ç§’
        'max': 180,           # æœ€å¤§è¶…æ—¶3åˆ†é’Ÿ
        'warning': 45         # è­¦å‘Šè¶…æ—¶45ç§’
    }
}
```

#### è¶…æ—¶è®¡ç®—
```python
def calculate_timeout(content_length, timeout_type):
    """è®¡ç®—åŠ¨æ€è¶…æ—¶æ—¶é—´"""
    config = TIMEOUT_CONFIG[timeout_type]
    timeout = config['base'] + (content_length * config['per_char'])
    return min(timeout, config['max'])
```

#### è¶…æ—¶å¤„ç†
```python
def handle_timeout(timeout_type, content_length):
    """å¤„ç†è¶…æ—¶"""
    if timeout_type == 'TTS_TIMEOUT' and content_length > 1000:
        # é•¿æ–‡æœ¬TTSï¼šæ˜¾ç¤ºè­¦å‘Šï¼Œç»§ç»­å¤„ç†
        show_warning("é•¿æ–‡æœ¬å¤„ç†ä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…...")
        return 'CONTINUE'
    else:
        # å…¶ä»–è¶…æ—¶ï¼šåœæ­¢å¤„ç†
        return 'STOP'
```

## ğŸ”§ é…ç½®ç®¡ç†é‡æ„

### ç»Ÿä¸€é…ç½®ç»“æ„

#### Pythoné…ç½® (config.py)
```python
# config.py
import os
from typing import Dict, Any

class Config:
    """ç»Ÿä¸€é…ç½®ç®¡ç†"""
    
    def __init__(self):
        self.config = {
            # åº”ç”¨é…ç½®
            'app': {
                'name': 'yyAsistant',
                'version': '2.0.0',
                'debug': os.getenv('DEBUG', 'False').lower() == 'true'
            },
            
            # æ•°æ®åº“é…ç½®
            'database': {
                'url': os.getenv('DATABASE_URL', 'sqlite:///yyAsistant.db'),
                'pool_size': int(os.getenv('DB_POOL_SIZE', '10')),
                'max_overflow': int(os.getenv('DB_MAX_OVERFLOW', '20'))
            },
            
            # WebSocketé…ç½®
            'websocket': {
                'url': os.getenv('WEBSOCKET_URL', 'ws://localhost:8000/ws'),
                'reconnect_attempts': int(os.getenv('WS_RECONNECT_ATTEMPTS', '5')),
                'reconnect_interval': int(os.getenv('WS_RECONNECT_INTERVAL', '5000')),
                'heartbeat_interval': int(os.getenv('WS_HEARTBEAT_INTERVAL', '30000'))
            },
            
            # è¯­éŸ³é…ç½®
            'voice': {
                'synthesis_voice': os.getenv('VOICE_SYNTHESIS_VOICE', 'zh-CN-XiaoxiaoNeural'),
                'synthesis_speed': float(os.getenv('VOICE_SYNTHESIS_SPEED', '1.0')),
                'synthesis_volume': float(os.getenv('VOICE_SYNTHESIS_VOLUME', '1.0')),
                'recognition_language': os.getenv('VOICE_RECOGNITION_LANGUAGE', 'zh-CN')
            },
            
            # è¶…æ—¶é…ç½®
            'timeouts': {
                'sse_base': int(os.getenv('SSE_TIMEOUT_BASE', '30')),
                'sse_per_char': float(os.getenv('SSE_TIMEOUT_PER_CHAR', '0.1')),
                'sse_max': int(os.getenv('SSE_TIMEOUT_MAX', '300')),
                'tts_base': int(os.getenv('TTS_TIMEOUT_BASE', '60')),
                'tts_per_char': float(os.getenv('TTS_TIMEOUT_PER_CHAR', '0.2')),
                'tts_max': int(os.getenv('TTS_TIMEOUT_MAX', '600')),
                'stt_base': int(os.getenv('STT_TIMEOUT_BASE', '30')),
                'stt_per_char': float(os.getenv('STT_TIMEOUT_PER_CHAR', '0.05')),
                'stt_max': int(os.getenv('STT_TIMEOUT_MAX', '180'))
            }
        }
    
    def get(self, key: str, default: Any = None) -> Any:
        """è·å–é…ç½®å€¼"""
        keys = key.split('.')
        value = self.config
        for k in keys:
            if isinstance(value, dict) and k in value:
                value = value[k]
            else:
                return default
        return value
    
    def set(self, key: str, value: Any) -> None:
        """è®¾ç½®é…ç½®å€¼"""
        keys = key.split('.')
        config = self.config
        for k in keys[:-1]:
            if k not in config:
                config[k] = {}
            config = config[k]
        config[keys[-1]] = value

# å…¨å±€é…ç½®å®ä¾‹
config = Config()
```

#### JavaScripté…ç½® (config.js)
```javascript
// config.js
class Config {
    constructor() {
        this.config = {
            // åº”ç”¨é…ç½®
            app: {
                name: 'yyAsistant',
                version: '2.0.0',
                debug: window.location.hostname === 'localhost'
            },
            
            // WebSocketé…ç½®
            websocket: {
                url: this.getWebSocketUrl(),
                reconnectAttempts: 5,
                reconnectInterval: 5000,
                heartbeatInterval: 30000
            },
            
            // è¯­éŸ³é…ç½®
            voice: {
                synthesisVoice: 'zh-CN-XiaoxiaoNeural',
                synthesisSpeed: 1.0,
                synthesisVolume: 1.0,
                recognitionLanguage: 'zh-CN'
            },
            
            // è¶…æ—¶é…ç½®
            timeouts: {
                sseBase: 30,
                ssePerChar: 0.1,
                sseMax: 300,
                ttsBase: 60,
                ttsPerChar: 0.2,
                ttsMax: 600,
                sttBase: 30,
                sttPerChar: 0.05,
                sttMax: 180
            }
        };
    }
    
    getWebSocketUrl() {
        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
        const host = window.location.host;
        return `${protocol}//${host}/ws`;
    }
    
    get(key, defaultValue = null) {
        const keys = key.split('.');
        let value = this.config;
        for (const k of keys) {
            if (value && typeof value === 'object' && k in value) {
                value = value[k];
            } else {
                return defaultValue;
            }
        }
        return value;
    }
    
    set(key, value) {
        const keys = key.split('.');
        let config = this.config;
        for (let i = 0; i < keys.length - 1; i++) {
            const k = keys[i];
            if (!(k in config) || typeof config[k] !== 'object') {
                config[k] = {};
            }
            config = config[k];
        }
        config[keys[keys.length - 1]] = value;
    }
}

// å…¨å±€é…ç½®å®ä¾‹
window.config = new Config();
```

## ğŸš¨ é”™è¯¯å¤„ç†é‡æ„

### ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶

#### é”™è¯¯åˆ†ç±»
```python
ERROR_TYPES = {
    'WEBSOCKET_CONNECTION': 'websocket_connection',
    'WEBSOCKET_MESSAGE': 'websocket_message',
    'STATE_TRANSITION': 'state_transition',
    'TIMEOUT': 'timeout',
    'VALIDATION': 'validation',
    'SYSTEM': 'system'
}
```

#### é”™è¯¯å¤„ç†å™¨
```python
class ErrorHandler:
    """ç»Ÿä¸€é”™è¯¯å¤„ç†å™¨"""
    
    def __init__(self):
        self.error_handlers = {}
        self.error_history = []
        self.register_handlers()
    
    def register_handlers(self):
        """æ³¨å†Œé”™è¯¯å¤„ç†å™¨"""
        self.error_handlers['WEBSOCKET_CONNECTION'] = self.handle_websocket_error
        self.error_handlers['STATE_TRANSITION'] = self.handle_state_error
        self.error_handlers['TIMEOUT'] = self.handle_timeout_error
        # ... å…¶ä»–å¤„ç†å™¨
    
    def handle_error(self, error_type, error_data):
        """å¤„ç†é”™è¯¯"""
        if error_type in self.error_handlers:
            return self.error_handlers[error_type](error_data)
        else:
            return self.handle_generic_error(error_data)
    
    def handle_websocket_error(self, error_data):
        """å¤„ç†WebSocketé”™è¯¯"""
        # è‡ªåŠ¨é‡è¿é€»è¾‘
        pass
    
    def handle_state_error(self, error_data):
        """å¤„ç†çŠ¶æ€é”™è¯¯"""
        # çŠ¶æ€å›æ»šé€»è¾‘
        pass
    
    def handle_timeout_error(self, error_data):
        """å¤„ç†è¶…æ—¶é”™è¯¯"""
        # è¶…æ—¶å¤„ç†é€»è¾‘
        pass
```

## ğŸ“Š é‡æ„æ”¶ç›Šåˆ†æ

### å¯é æ€§æå‡
- **çŠ¶æ€ä¸€è‡´æ€§**ï¼šè§£å†³çŠ¶æ€å†²çªå’Œä¸åŒæ­¥é—®é¢˜
- **WebSocketç¨³å®šæ€§**ï¼šè‡ªåŠ¨é‡è¿ã€å¿ƒè·³æ£€æµ‹ã€è¿æ¥æ± ç®¡ç†
- **é”™è¯¯æ¢å¤**ï¼šè‡ªåŠ¨é‡è¯•ã€çŠ¶æ€å›æ»šã€èµ„æºæ¸…ç†

### å¼€å‘æ•ˆç‡
- **ä»£ç å¯ç»´æŠ¤æ€§**ï¼šæ¸…æ™°çš„çŠ¶æ€å®šä¹‰ã€ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- **è°ƒè¯•ä¾¿åˆ©æ€§**ï¼šç»Ÿä¸€æ—¥å¿—ã€çŠ¶æ€è¿½è¸ªã€æ€§èƒ½ç›‘æ§
- **æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–è®¾è®¡ã€æ’ä»¶åŒ–æ¶æ„

### ç”¨æˆ·ä½“éªŒ
- **å“åº”é€Ÿåº¦**ï¼šä¼˜åŒ–èµ„æºç®¡ç†ã€å‡å°‘é˜»å¡
- **é”™è¯¯æç¤º**ï¼šç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯ã€è‡ªåŠ¨æ¢å¤æç¤º
- **åŠŸèƒ½ç¨³å®šæ€§**ï¼šå‡å°‘åŠŸèƒ½å¼‚å¸¸ã€æå‡æˆåŠŸç‡

## ğŸ¯ å®æ–½åŸåˆ™

### 1. ä¿æŒç•Œé¢ä¸å˜
- ä¸ä¿®æ”¹ç”¨æˆ·ç•Œé¢ç»„ä»¶
- ä¸æ”¹å˜ç”¨æˆ·äº¤äº’æµç¨‹
- åªä¼˜åŒ–åç«¯é€»è¾‘

### 2. æ¸è¿›å¼é‡æ„
- åˆ†é˜¶æ®µå®æ–½
- é€æ­¥æ›¿æ¢æ—§ä»£ç 
- ä¿æŒç³»ç»Ÿç¨³å®šæ€§

### 3. å……åˆ†æµ‹è¯•
- æ¯ä¸ªé˜¶æ®µéƒ½è¦æµ‹è¯•
- ç¡®ä¿åŠŸèƒ½æ­£å¸¸
- éªŒè¯æ€§èƒ½æå‡

### 4. æ–‡æ¡£å®Œå–„
- è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£
- æ¸…æ™°çš„å®æ–½è®¡åˆ’
- å®Œæ•´çš„æµ‹è¯•æŠ¥å‘Š

---

**æ€»ç»“**ï¼šæœ¬é‡æ„æ–¹æ¡ˆé€šè¿‡ç»Ÿä¸€çŠ¶æ€ç®¡ç†ã€äº‹ä»¶é©±åŠ¨æ¶æ„ã€æ™ºèƒ½è¶…æ—¶æœºåˆ¶ã€é…ç½®ç®¡ç†ç»Ÿä¸€ã€é”™è¯¯å¤„ç†ç»Ÿä¸€ç­‰æ ¸å¿ƒæ”¹è¿›ï¼Œå°†æ˜¾è‘—æå‡ç³»ç»Ÿçš„å¯é æ€§ã€å¯ç»´æŠ¤æ€§å’Œç”¨æˆ·ä½“éªŒï¼ŒåŒæ—¶ä¿æŒç”¨æˆ·ç•Œé¢çš„ç¨³å®šæ€§ã€‚
